{# empty Twig template #}
{% extends "base.html.twig" %}
{% block title %}
    Classement Pro 14
{% endblock %}
{% block body %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item" aria-current="page"><a href='{{ path('index')}}'>Accueil</a></li>
        <li class="breadcrumb-item active" aria-current="page">Classement</li>
    </ol>
</nav>
<div class='container-fluid'>
    <div class='row'>
        <div class='col-lg-12'>
            <h1>Compétition - classement</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-2">
            {{ include('competition/blockMenu.html.twig',{'active': active}) }}
        </div>
        <div class="col-lg-10">
            <div class="row">
               <div class="col-lg-6">
                   <h2>Saison {{ saison }}</h2>
               </div>
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <h3>Conférence A</h3>
                    <div class="table-responsive classement-reduce-size">
                        <table class="table">
                            <thead class="thead-dark">
                                <tr>
                                    <th>Pos</th>
                                    <th>Equipe</th>
                                    <th>Joué</th>
                                    <th>Points</th>
                                    <th>V</th>
                                    <th>N</th>
                                    <th>D</th>
                                    <th>BO</th>
                                    <th>BD</th>
                                    <th>+/-</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for confA in lastClassementA %}
                                    <tr>
                                        <th>{{ confA.classement }} </th>
                                        <td><img src="{{ asset('images/logo/'~confA.equipe.logo)}}" width="19"> {{ confA.equipe.nom }} </td>
                                        <td> {{confA.joue }}</td>
                                        <td> {{confA.nbPoints }}</td>
                                        <td> {{confA.victoire }}</td>
                                        <td> {{confA.nul }}</td>
                                        <td> {{confA.defaite }}</td>
                                        <td> {{confA.bo }}</td>
                                        <td> {{confA.bd }}</td>
                                        <td> {{confA.difference }}</td>
                                    </tr>                                    
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-lg-6">
                    <h3>Conférence B</h3>
                    <div class="table-responsive classement-reduce-size">
                        <table class="table">
                            <thead class="thead-dark">
                                <tr>
                                    <th>Pos</th>
                                    <th>Equipe</th>
                                    <th>Joué</th>
                                    <th>Points</th>
                                    <th>V</th>
                                    <th>N</th>
                                    <th>D</th>
                                    <th>BO</th>
                                    <th>BD</th>
                                    <th>+/-</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for confB in lastClassementB %}
                                    <tr>
                                        <th>{{ confB.classement }} </th>
                                        <td><img src="{{ asset('images/logo/'~confB.equipe.logo)}}" width="19"> {{ confB.equipe.nom }} </td>
                                        <td> {{confB.joue }}</td>
                                        <td> {{confB.nbPoints }}</td>
                                        <td> {{confB.victoire }}</td>
                                        <td> {{confB.nul }}</td>
                                        <td> {{confB.defaite }}</td>
                                        <td> {{confB.bo }}</td>
                                        <td> {{confB.bd }}</td>
                                        <td> {{confB.difference }}</td>
                                    </tr>                                    
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                        
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6">
            <h4> Classement évolutif conférence A</h4>
            <canvas id="confA" width="600" height="400"></canvas>
        </div>
        <div class="col-lg-6">
            <h4> Classement évolutif conférence B</h4>
            <canvas id="confB" width="600" height="400"></canvas>
        </div>
    </div>
    <div class="row justify-content-center classement-reduce-size">
        <div class="col-lg-6">
            <h3>Meilleur réalisateur :</h3>
            <div class="table-responsive">
                <table class="table">
                    <thead class="thead-dark">
                        <th>Joueur</th>
                        <th>Equipe</th>
                        <th>Points</th>
                        <th>Essais</th>
                        <th>Pénalités</th>
                        <th>Transformations</th>
                        <th>Drops</th>
                    </thead>
                    <tbody>
                        {% for realisateur in realisateurs %}
                            <tr>
                                <th>{{realisateur.joueur.joueur.prenom~' '~realisateur.joueur.joueur.nom}}</th>
                                <td>{{realisateur.joueur.equipe.nom}}</td>
                                <td>{{realisateur.p}}</td>
                                <td>{{realisateur.1}}</td>
                                <td>{{realisateur.2}}</td>
                                <td>{{realisateur.3}}</td>
                                <td>{{realisateur.4}}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-lg-6">
            <h3>Meilleur marqueur :</h3>
            <div class="table-responsive">
                <table class="table">
                    <thead class="thead-dark">
                        <th>Joueur</th>
                        <th>Equipe</th>
                        <th>Points</th>
                        <th>Essais</th>
                    </thead>
                    <tbody>
                        {% for marqueur in marqueurs %}
                            <tr>
                                <th>{{marqueur.joueur.joueur.prenom~' '~marqueur.joueur.joueur.nom}}</th>
                                <td>{{marqueur.joueur.equipe.nom}}</td>
                                <td>{{marqueur.points}}</td>
                                <td>{{marqueur.essais}}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <h6>Voir les saison précédentes </h6>
            {% for saisprec in saisonsPrécédentes %}
                <a href="{{ path('classement_competition_autre_saison',{'nomSaison':saisprec.saison})}}">Saison {{saisprec.saison}}</a>
            {% endfor %}
        </div>
        
    </div>
</div>
{% endblock  %}
{% block javascript %}
    <script></script>
<script type="text/javascript" >
        function getColor(equipe){
           var color;
            switch (equipe){
                case 'Glasgow Warriors':
                    color = 'grey';
                    break;
                case 'Munster':
                    color = 'red';
                    break;
                case 'Connacht':
                    color = 'green';
                    break;
                case 'Ospreys':
                    color = 'black';
                    break;
                case 'Cardiff Blues':
                    color = 'blue';
                    break;
                case 'Toyota Cheetahs':
                    color = 'orange';
                    break;
                case 'Zebres':
                    color = 'yellow';
                    break;
                case 'Leinster':
                    color = "blue";
                    break;
                case 'Ulster':
                    color = "#CCCCCC";
                    break;
                case 'Benetton Trevise':
                    color = "green";
                    break;
                case 'Scarlets':
                    color = "red";
                    break;
                case 'Edinburgh':
                    color = "purple";
                    break;
                case 'Dragons':
                    color = "black";
                    break;
                case 'Southern Kings':
                    color = "Orange";
                    break;
                
            }
            return color;
        }
        var configA = {
            type:'line',
            data:{
                labels:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],
                datasets: [{% for uneEquipe in classementsA %} {
                    label: '{{ uneEquipe|first.equipe.nom }}',
                    backgroundColor: getColor("{{uneEquipe|first.equipe.nom}}"),
                    borderColor: getColor("{{uneEquipe|first.equipe.nom}}"),
                    data: [{% for classement in uneEquipe %}{{classement.classement}},{% endfor %}],
                    fill: false,
                    },{% endfor %}]
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    text: 'Classement évolutif conférence A',
                },
                tooltips:{
                    mode: 'index',
                    intersect: false,
                },
                hover:{
                    mode: 'nearest',
                    intersect: true,
                },
                scales:{
                    xAxes: [{
                        display: true, 
                        scaleLabel:{
                           display: true,
                           labelString: 'Journée',
                       }
                    }],
                    yAxes: [{
                        display: true, 
                        scaleLabel:{
                           display: true,
                           labelString: 'Position',
                       },
                       ticks: {
                            reverse: true,
                        }
                    }],
                }
            }
        };
     /*   window.onload = function(){
            
        };*/
        var configB = {
            type:'line',
            data:{
                labels:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],
                datasets: [{% for uneEquipe in classementsB %} {
                    label: '{{ uneEquipe|first.equipe.nom }}',
                    backgroundColor: getColor("{{uneEquipe|first.equipe.nom}}"),
                    borderColor: getColor("{{uneEquipe|first.equipe.nom}}"),
                    data: [{% for classement in uneEquipe %}{{classement.classement}},{% endfor %}],
                    fill: false,
                    },{% endfor %}]
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    text: 'Classement évolutif conférence B',
                },
                tooltips:{
                    mode: 'index',
                    intersect: false,
                },
                hover:{
                    mode: 'nearest',
                    intersect: true,
                },
                scales:{
                    xAxes: [{
                        display: true, 
                        scaleLabel:{
                           display: true,
                           labelString: 'Journée',
                       }
                    }],
                    yAxes: [{
                        display: true, 
                        scaleLabel:{
                           display: true,
                           labelString: 'Position',
                       },
                       ticks: {
                            reverse: true,
                        }
                    }],
                }
            }
        };
        window.onload = function(){
            var ctx = document.getElementById('confA').getContext('2d');
            window.myLine = new Chart(ctx,configA);
            var ctx2 = document.getElementById('confB').getContext('2d');
            window.myLine = new Chart(ctx2,configB);
        };
</script>
{% endblock %}
